/**
 *  jquery.pSlider.js
 *
 *  @version    0.2
 *  @requires   jQuery v1.6+
 *  @link       https://github.com/pocotan001/jquery.pSlider.js
 *  @author     Hayato Mizuno (http://twitter.com/pocotan001)
 *  @copyright  Hayato Mizuno
 *  @license    MIT License
 */

(function(d){function e(a,c){this.settings=d.extend({},d.pSlider.defaults,c);this.$node=d(a);this.$slides=this.$node.find(this.settings.slidesSelector).hide().css("opacity","0");this.$current=this.$slides.eq(0).show().css("opacity","1");this.$paging=this.$node.find(this.settings.pagingSelector);this.slideSum=this.$slides.length-1;this.currentIndex=0;this.direction=this.settings.vertical?"top":"left";this.speed=this.settings.speed/2;this.isBusy=!1;this.$paging.eq(0).addClass(this.settings.activeClass);
0<this.slideSum&&this.launch()}e.prototype={launch:function(){var a=this;this.$node.find(this.settings.nextSelector).click(function(){a.next()});this.$node.find(this.settings.prevSelector).click(function(){a.prev()});this.$paging.each(function(c){if(a.slideSum<c)return!1;d(this).click(function(){c!==a.currentIndex&&a.rotate(c,c<a.currentIndex)})});if(isFinite(this.settings.interval)&&"boolean"!==typeof this.settings.interval)this.settings.pause&&this.$node.hover(function(){clearInterval(a.timerID)},
function(){a.timerID=setInterval(function(){a.next()},a.settings.interval)}),this.timerID=setInterval(function(){a.next()},this.settings.interval)},rotate:function(a,c){if(!this.isBusy){var b=this,e=this.$slides.eq(a);this.isBusy=!0;this.currentIndex=a;c||(c=!1);this.$paging.removeClass(this.settings.activeClass).eq(a).addClass(this.settings.activeClass);this.settings.beforeRotate&&this.settings.beforeRotate.call(e[0],a,c);d.Deferred(function(d){d.pipe(function(){return b.$current.animate({top:!b.settings.vertical?
0:b.distance(c),left:b.settings.vertical?0:b.distance(c),opacity:0},b.speed,"linear")}).pipe(function(){b.$current.hide().css(b.direction,"0");b.$current=e.show().css(b.direction,b.distance(c,!0));b.isBusy=!1;return b.$current.animate({top:0,left:0,opacity:1},b.speed,"linear")}).done(function(){b.settings.afterRotate&&b.settings.afterRotate.call(b.$current[0],a,c)})}).resolve()}},next:function(){this.rotate(this.slideSum<=this.currentIndex?0:this.currentIndex+1)},prev:function(){this.rotate(0>=this.currentIndex?
this.slideSum:this.currentIndex-1,!0)},distance:function(a,c){var b=a?this.settings.distance:-this.settings.distance;return(c?-b:b)+"px"}};d.pSlider={};d.pSlider.defaults={speed:500,distance:10,interval:5E3,pause:!0,vertical:!1,activeClass:"active",slidesSelector:".slides > *",pagingSelector:".paging > *",nextSelector:".next",prevSelector:".prev",beforeRotate:!1,afterRotate:!1};d.fn.pSlider=function(a){return this.each(function(){new e(this,a)})}})(jQuery);
